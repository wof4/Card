{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\yulya\\\\Desktop\\\\\\u041D\\u043E\\u0432\\u0430\\u044F \\u043F\\u0430\\u043F\\u043A\\u0430\\\\card\\\\client\\\\src\\\\pages\\\\CardPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport LoadingButton from \"@mui/lab/LoadingButton\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport CustomAlert from \"../components/CustomAlert\";\nimport BackSide from \"../components/BackSide\";\nimport FrontSide from \"../components/FrontSide\";\nimport { AmountMaskCustom, checkValidData } from \"../utils\";\nimport MainApi from \"../api/mainApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CardPage = () => {\n  _s();\n\n  const [values, setValues] = React.useState({\n    cardNumber: \"\",\n    expDate: \"\",\n    cvv: \"\",\n    amount: \"\"\n  });\n  const [loading, setLoading] = React.useState(false);\n  const [result, setResult] = React.useState({\n    status: null,\n    message: \"\",\n    data: null\n  });\n  const [error, setError] = React.useState({\n    data: \"\",\n    amount: \"\"\n  });\n  const validData = values.cardNumber.length === 19 && values.expDate.length === 5 && values.cvv.length === 3 && values.amount.length > 0;\n\n  const sendCardData = async () => {\n    setLoading(true);\n    const data = { ...values,\n      cardNumber: values.cardNumber.split(\" \").join(\"\")\n    };\n    const response = await MainApi.sendData(data);\n    setResult(response);\n    setValues({\n      cardNumber: \"\",\n      expDate: \"\",\n      cvv: \"\",\n      amount: \"\"\n    });\n    setLoading(false);\n  };\n\n  const handleFormattedNumberChange = useCallback(event => {\n    setError({ ...error,\n      data: \"\"\n    });\n    const {\n      value,\n      name\n    } = event.target;\n    const isValid = checkValidData(name, value);\n\n    if (isValid) {\n      setValues({ ...values,\n        [name]: value\n      });\n    } else {\n      setError({ ...error,\n        data: \"Введите корректную дату\"\n      });\n    }\n  }, [values]);\n  const handleNumberChange = useCallback((name, event) => {\n    const {\n      value\n    } = event.target;\n    setValues({ ...values,\n      [name]: value\n    });\n  }, [values]);\n  return /*#__PURE__*/_jsxDEV(Box, {\n    sx: {\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"center\",\n      alignItems: \"center\"\n    },\n    children: [result && /*#__PURE__*/_jsxDEV(CustomAlert, {\n      setResult: setResult,\n      message: result.message,\n      status: result.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(BackSide, {\n      handleNumberChange: handleNumberChange,\n      loading: loading,\n      value: values.cvv\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(FrontSide, {\n      handleFormattedNumberChange: handleFormattedNumberChange,\n      loading: loading,\n      cardNumber: values.cardNumber,\n      expDate: values.expDate,\n      error: error.data\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Box, {\n      sx: {\n        marginTop: \"30px\",\n        display: \"flex\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        disabled: loading,\n        sx: {\n          width: 250,\n          marginRight: \"10px\"\n        },\n        variant: \"outlined\",\n        placeholder: \"\\u0421\\u0443\\u043C\\u043C\\u0430\",\n        value: values.amount,\n        onChange: e => handleNumberChange(\"amount\", e),\n        InputProps: {\n          // @ts-ignore: Unreachable code error\n          inputComponent: AmountMaskCustom\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LoadingButton, {\n        size: \"medium\",\n        color: \"primary\",\n        onClick: sendCardData,\n        loading: loading,\n        loadingPosition: \"start\",\n        startIcon: /*#__PURE__*/_jsxDEV(SendIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 22\n        }, this),\n        variant: \"contained\",\n        disabled: !validData,\n        children: \"\\u041E\\u041F\\u041B\\u0410\\u0422\\u0418\\u0422\\u042C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CardPage, \"hO32Dkxs5EoVOZKzhA67MefMOTU=\");\n\n_c = CardPage;\nexport default CardPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardPage\");","map":{"version":3,"sources":["C:/Users/yulya/Desktop/Новая папка/card/client/src/pages/CardPage.tsx"],"names":["React","useCallback","Box","TextField","LoadingButton","SendIcon","CustomAlert","BackSide","FrontSide","AmountMaskCustom","checkValidData","MainApi","CardPage","values","setValues","useState","cardNumber","expDate","cvv","amount","loading","setLoading","result","setResult","status","message","data","error","setError","validData","length","sendCardData","split","join","response","sendData","handleFormattedNumberChange","event","value","name","target","isValid","handleNumberChange","height","display","flexDirection","justifyContent","alignItems","marginTop","width","marginRight","e","inputComponent"],"mappings":"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","sourcesContent":["import React, { ElementType, useCallback } from \"react\";\nimport Box from \"@mui/material/Box\";\nimport TextField from \"@mui/material/TextField\";\nimport LoadingButton from \"@mui/lab/LoadingButton\";\nimport SendIcon from \"@mui/icons-material/Send\";\nimport CustomAlert from \"../components/CustomAlert\";\nimport BackSide from \"../components/BackSide\";\nimport FrontSide from \"../components/FrontSide\";\nimport { CustomProps, FormattedNumberChangeType } from \"../types\";\nimport { AmountMaskCustom, checkValidData } from \"../utils\";\nimport MainApi from \"../api/mainApi\";\nimport { InputBaseComponentProps } from \"@mui/material\";\n\nconst CardPage = () => {\n  const [values, setValues] = React.useState({\n    cardNumber: \"\",\n    expDate: \"\",\n    cvv: \"\",\n    amount: \"\",\n  });\n  const [loading, setLoading] = React.useState(false);\n  const [result, setResult] = React.useState({\n    status: null,\n    message: \"\",\n    data: null,\n  });\n  const [error, setError] = React.useState({ data: \"\", amount: \"\" });\n\n  const validData =\n    values.cardNumber.length === 19 &&\n    values.expDate.length === 5 &&\n    values.cvv.length === 3 &&\n    values.amount.length > 0;\n\n  const sendCardData = async () => {\n    setLoading(true);\n\n    const data = {\n      ...values,\n      cardNumber: values.cardNumber.split(\" \").join(\"\"),\n    };\n\n    const response = await MainApi.sendData(data);\n    setResult(response);\n\n    setValues({\n      cardNumber: \"\",\n      expDate: \"\",\n      cvv: \"\",\n      amount: \"\",\n    });\n    setLoading(false);\n  };\n\n  const handleFormattedNumberChange: FormattedNumberChangeType = useCallback(\n    (event) => {\n      setError({ ...error, data: \"\" });\n      const { value, name } = event.target;\n      const isValid = checkValidData(name, value);\n\n      if (isValid) {\n        setValues({ ...values, [name]: value });\n      } else {\n        setError({ ...error, data: \"Введите корректную дату\" });\n      }\n    },\n    [values]\n  );\n\n  const handleNumberChange = useCallback(\n    (\n      name: string,\n      event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n    ) => {\n      const { value } = event.target;\n      setValues({ ...values, [name]: value });\n    },\n    [values]\n  );\n\n  return (\n    <Box\n      sx={{\n        height: \"100%\",\n        display: \"flex\",\n        flexDirection: \"column\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n      }}\n    >\n      {result && (\n        <CustomAlert\n          setResult={setResult}\n          message={result.message}\n          status={result.status}\n        />\n      )}\n\n      <BackSide\n        handleNumberChange={handleNumberChange}\n        loading={loading}\n        value={values.cvv}\n      />\n\n      <FrontSide\n        handleFormattedNumberChange={handleFormattedNumberChange}\n        loading={loading}\n        cardNumber={values.cardNumber}\n        expDate={values.expDate}\n        error={error.data}\n      />\n\n      <Box sx={{ marginTop: \"30px\", display: \"flex\" }}>\n        <TextField\n          disabled={loading}\n          sx={{ width: 250, marginRight: \"10px\" }}\n          variant=\"outlined\"\n          placeholder=\"Сумма\"\n          value={values.amount}\n          onChange={(e) => handleNumberChange(\"amount\", e)}\n          InputProps={{ \n   // @ts-ignore: Unreachable code error\n            inputComponent: AmountMaskCustom,\n          }}\n        />\n        <LoadingButton\n          size=\"medium\"\n          color=\"primary\"\n          onClick={sendCardData}\n          loading={loading}\n          loadingPosition=\"start\"\n          startIcon={<SendIcon />}\n          variant=\"contained\"\n          disabled={!validData}\n        >\n          ОПЛАТИТЬ\n        </LoadingButton>\n      </Box>\n    </Box>\n  );\n};\n\nexport default CardPage;\n"]},"metadata":{},"sourceType":"module"}